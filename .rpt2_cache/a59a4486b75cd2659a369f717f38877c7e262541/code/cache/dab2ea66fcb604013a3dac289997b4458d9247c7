{"code":"import IString from \"./IString\";\r\nimport INumber from \"./INumber\";\r\nvar IDate = (function () {\r\n    function IDate() {\r\n    }\r\n    IDate.add = function (date, value, addType) {\r\n        var callFun = { 0: \"Year\", 1: \"Month\", 2: \"Day\", 3: \"Hours\", 4: \"Minutes\", 5: \"Seconds\", 6: \"Milliseconds\" };\r\n        var funSuffixName = callFun[addType];\r\n        if (!funSuffixName) {\r\n            throw new RangeError(\"addType value must between 0 and 6\");\r\n        }\r\n        IDate[\"set\" + funSuffixName](date, IDate[\"get\" + funSuffixName](date) + value);\r\n    };\r\n    IDate.after = function (date, when) {\r\n        return this.compareTo(date, when) > 0;\r\n    };\r\n    IDate.before = function (date, when) {\r\n        return this.compareTo(date, when) < 0;\r\n    };\r\n    IDate.between = function (date, start, end) {\r\n        return this.after(date, start) && this.before(date, end);\r\n    };\r\n    IDate.compareTo = function (date1, date2) {\r\n        return date1.getTime() - date2.getTime();\r\n    };\r\n    IDate.format = function (date, pattern) {\r\n        if ('string' != typeof pattern) {\r\n            return date.toString();\r\n        }\r\n        function replacer(patternPart, result) {\r\n            pattern = pattern.replace(patternPart, result);\r\n        }\r\n        var year = date.getFullYear(), month = date.getMonth() + 1, date2 = date.getDate(), hours = date.getHours(), minutes = date.getMinutes(), seconds = date.getSeconds(), milliseconds = date.getMilliseconds();\r\n        replacer(/yyyy/g, IString.padLeft(year + \"\", 4, \"0\"));\r\n        replacer(/yy/g, IString.padLeft(parseInt(year.toString().slice(2), 10) + \"\", 2, \"0\"));\r\n        replacer(/MM/g, IString.padLeft(month + \"\", 2, \"0\"));\r\n        replacer(/M/g, month);\r\n        replacer(/dd/g, IString.padLeft(date2 + \"\", 2, \"0\"));\r\n        replacer(/d/g, date2);\r\n        replacer(/HH/g, IString.padLeft(hours + \"\", 2, \"0\"));\r\n        replacer(/H/g, hours);\r\n        replacer(/hh/g, IString.padLeft(hours % 12 + \"\", 2, \"0\"));\r\n        replacer(/h/g, hours % 12);\r\n        replacer(/mm/g, IString.padLeft(minutes + \"\", 2, \"0\"));\r\n        replacer(/m/g, minutes);\r\n        replacer(/ss/g, IString.padLeft(seconds + \"\", 2, \"0\"));\r\n        replacer(/s/g, seconds);\r\n        replacer(/SSS/g, IString.padLeft(milliseconds + \"\", 3, \"0\"));\r\n        return pattern;\r\n    };\r\n    IDate.formatToFriendly = function (date, friendlyPattern) {\r\n        if (!friendlyPattern) {\r\n            friendlyPattern = {\r\n                \"刚刚\": 60,\r\n                \"一小时前\": 3600,\r\n                \"HH:mm\": 86400,\r\n                \"yyyy年MM月dd日\": -1\r\n            };\r\n        }\r\n        var now = new Date();\r\n        for (var pattern in friendlyPattern) {\r\n            var value = friendlyPattern[pattern];\r\n            if (-1 == value) {\r\n                return IDate.format(date, pattern);\r\n            }\r\n            if ((now.getTime() - date.getTime()) < value * 1000) {\r\n                return IDate.format(date, pattern);\r\n            }\r\n        }\r\n    };\r\n    IDate.getDay = function (date) {\r\n        return date.getDate();\r\n    };\r\n    IDate.getDayOfWeek = function (date) {\r\n        return date.getDay();\r\n    };\r\n    IDate.getDayOfWeekInMonth = function (date) {\r\n        var day = this.getDayOfWeek(date), d = date.getDate();\r\n        return Math.ceil((d + 6 - day) / 7);\r\n    };\r\n    IDate.getDayOfYear = function (date) {\r\n        var firstDay = new Date(date.getFullYear(), 0, 1);\r\n        return Math.ceil((date.getTime() - firstDay.getTime()) / (1000 * 60 * 60 * 24));\r\n    };\r\n    IDate.getHours = function (date) {\r\n        return date.getHours();\r\n    };\r\n    IDate.getMilliseconds = function (date) {\r\n        return date.getMilliseconds();\r\n    };\r\n    IDate.getMinutes = function (date) {\r\n        return date.getMinutes();\r\n    };\r\n    IDate.getMonth = function (date) {\r\n        return date.getMonth();\r\n    };\r\n    IDate.getQuarter = function (date) {\r\n        return Math.floor((date.getMonth() + 3) / 3);\r\n    };\r\n    IDate.getSeconds = function (date) {\r\n        return date.getSeconds();\r\n    };\r\n    IDate.getTime = function (date) {\r\n        return date.getTime();\r\n    };\r\n    IDate.getWeekOfMonth = function (date) {\r\n        var year = date.getFullYear(), month = date.getMonth(), first = new Date(year, month, 1).getDate(), last = 32 - new Date(year, month, 32).getDate();\r\n        return Math.ceil((first + last) / 7);\r\n    };\r\n    IDate.getWeekOfYear = function (date) {\r\n        var year = date.getFullYear(), beginDay = new Date(year, 0, 1).getDay(), days = this.isLeapYear(year) ? 366 : 365;\r\n        return Math.ceil((days - beginDay) / 7.0);\r\n    };\r\n    IDate.getYear = function (date) {\r\n        return date.getFullYear();\r\n    };\r\n    IDate.isDate = function (date) {\r\n        return Object.prototype.toString.call(date) === '[object Date]';\r\n    };\r\n    IDate.isLeapYear = function (value) {\r\n        if (this.isDate(value)) {\r\n            value = this.getYear(value);\r\n        }\r\n        if (INumber.isNumber(value)) {\r\n            return value % 4 == 0 && (value % 100 != 0 || value % 400 == 0);\r\n        }\r\n        return false;\r\n    };\r\n    IDate.minus = function (startTime, endTime, diffType) {\r\n        var diff = endTime.getTime() - startTime.getTime();\r\n        var divisions = [24 * 3600 * 1000, 3600 * 1000, 60000, 1000, 1];\r\n        if (diffType < 2 || diffType > 6) {\r\n            throw new RangeError(\"diffType value must between 2 and 6\");\r\n        }\r\n        return INumber.parseInt(diff / divisions[diffType - 2]);\r\n    };\r\n    IDate.now = function () {\r\n        return new Date().getTime();\r\n    };\r\n    IDate.parse = function (str, pattern) {\r\n        if (pattern === void 0) { pattern = \"yyyy-MM-dd\"; }\r\n        var obj = { y: 0, M: 1, d: 0, H: 0, h: 0, m: 0, s: 0, S: 0 };\r\n        pattern.replace(/([^yMdHmsS]*?)(([yMdHmsS])\\3*)([^yMdHmsS]*?)/g, function (m, $1, $2, $3, $4, idx, old) {\r\n            str = str.replace(new RegExp($1 + '(\\\\d{1,' + $2.length + '})' + $4), function (_m, _$1) {\r\n                obj[$3] = parseInt(_$1);\r\n                return '';\r\n            });\r\n            return '';\r\n        });\r\n        obj.M--;\r\n        var date = new Date(obj.y, obj.M, obj.d, obj.H, obj.m, obj.s);\r\n        if (obj.S !== 0)\r\n            date.setMilliseconds(obj.S);\r\n        return date;\r\n    };\r\n    IDate.setDay = function (date, day) {\r\n        date.setDate(day);\r\n    };\r\n    IDate.setHours = function (date, hour) {\r\n        date.setHours(hour);\r\n    };\r\n    IDate.setMilliseconds = function (date, millisec) {\r\n        date.setMilliseconds(millisec);\r\n    };\r\n    IDate.setMinutes = function (date, min) {\r\n        date.setMinutes(min);\r\n    };\r\n    IDate.setMonth = function (date, month) {\r\n        date.setMonth(month);\r\n    };\r\n    IDate.setSeconds = function (date, sec) {\r\n        date.setSeconds(sec);\r\n    };\r\n    IDate.setYear = function (date, year) {\r\n        date.setFullYear(year);\r\n    };\r\n    IDate.setTime = function (date, millisec) {\r\n        date.setTime(millisec);\r\n    };\r\n    IDate.toJson = function (date) {\r\n        var result = date.getFullYear() +\r\n            \"-\" + IString.padLeft(date.getMonth() + 1 + \"\", 2, \"0\") +\r\n            \"-\" + IString.padLeft(date.getDate() + \"\", 2, \"0\") +\r\n            \"T\" + IString.padLeft(date.getHours() + \"\", 2, \"0\") +\r\n            \":\" + IString.padLeft(date.getMinutes() + \"\", 2, \"0\") +\r\n            \":\" + IString.padLeft(date.getSeconds() + \"\", 2, \"0\") +\r\n            \".\" + IString.padLeft(date.getMilliseconds() + \"\", 3, \"0\") + \"Z\";\r\n        if (isLessIE7) {\r\n            result = '\"' + result + '\"';\r\n        }\r\n        return result;\r\n    };\r\n    IDate.toString = function (date) {\r\n        return Date.prototype.toString.call(date);\r\n    };\r\n    IDate.YEAR = 0;\r\n    IDate.MONTH = 1;\r\n    IDate.DAY = 2;\r\n    IDate.HOUR = 3;\r\n    IDate.MINUTE = 4;\r\n    IDate.SECOND = 5;\r\n    IDate.MILLISECOND = 6;\r\n    return IDate;\r\n}());\r\nexport default IDate;\r\nvar isLessIE7 = false;\r\ntry {\r\n    var version = navigator.appVersion.split(\";\")[1].replace(/[ ]/g, \"\");\r\n    isLessIE7 = (navigator.appName == \"Microsoft Internet Explorer\" && (version == \"MSIE6.0\" || version == \"MSIE7.0\"));\r\n}\r\ncatch (e) {\r\n    isLessIE7 = false;\r\n}\r\n"}
